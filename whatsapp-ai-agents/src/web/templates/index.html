{% extends "base.html" %}

{% block content %}
<h1>Dashboard</h1>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-label">Conversas</div>
        <div class="stat-value" id="total-conversations">0</div>
        <div class="stat-label">Total</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-label">Mensagens</div>
        <div class="stat-value" id="total-messages">0</div>
        <div class="stat-label">Processadas</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-label">Tempo Médio</div>
        <div class="stat-value" id="avg-response-time">0s</div>
        <div class="stat-label">Resposta</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-label">Satisfação</div>
        <div class="stat-value" id="satisfaction-rate">0%</div>
        <div class="stat-label">Cliente</div>
    </div>
</div>

<div class="card">
    <div class="card-header">Agentes Ativos</div>
    <div class="card-body">
        <div class="agents-grid">
            {% for agent in agents %}
            <div class="agent-card">
                <h3>{{ agent.name }}</h3>
                <p>{{ agent.description }}</p>
                <div class="agent-status status-{{ agent.status }}">{{ agent.status == 'active' and 'Ativo' or 'Inativo' }}</div>
                <div style="margin-top: 1rem;">
                    <strong>Modelo:</strong> {{ agent.model }}<br>
                    <strong>Temperatura:</strong> {{ agent.temperature }}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">Testar Agentes</div>
    <div class="card-body">
        {% for agent in agents %}
        <div style="margin-bottom: 2rem; padding-bottom: 2rem; border-bottom: 1px solid #eee;">
            <h3>{{ agent.name }}</h3>
            <div class="form-group">
                <label for="test-message-{{ agent.id }}">Mensagem de teste:</label>
                <input type="text" id="test-message-{{ agent.id }}" class="form-control" placeholder="Digite uma mensagem para testar o agente...">
            </div>
            <button class="btn btn-primary" onclick="testAgent('{{ agent.id }}')">Testar</button>
            <div style="margin-top: 1rem;">
                <strong>Resposta:</strong>
                <div id="test-response-{{ agent.id }}" style="margin-top: 0.5rem; padding: 1rem; background: #f8f9fa; border-radius: 4px;"></div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}